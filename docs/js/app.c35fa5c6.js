(function(t){function e(e){for(var a,s,r=e[0],l=e[1],c=e[2],u=0,m=[];u<r.length;u++)s=r[u],n[s]&&m.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],a=!0,r=1;r<o.length;r++){var l=o[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var a={},n={1:0},i=[];function s(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=a,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;i.push([27,0]),o()})({27:function(t,e,o){t.exports=o("Vtdi")},"2UeZ":function(t,e,o){"use strict";var a=o("kVqF"),n=o.n(a);n.a},"4x2p":function(t,e,o){"use strict";var a=o("Vv80"),n=o.n(a);n.a},"5SmC":function(t,e,o){"use strict";var a=o("Ga8l"),n=o.n(a);n.a},"6U7A":function(t,e,o){},"7z1s":function(t,e,o){},CCNQ:function(t,e,o){},FMEd:function(t,e,o){},FP6H:function(t,e,o){},Ga8l:function(t,e,o){},HvQT:function(t,e,o){},NQ42:function(t,e,o){"use strict";var a=o("x9/q"),n=o.n(a);n.a},TNW7:function(t,e,o){"use strict";var a=o("7z1s"),n=o.n(a);n.a},Vtdi:function(t,e,o){"use strict";o.r(e);o("VRzm");var a=o("Kw5r"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("modals-container"),o("router-view")],1)},i=[],s=(o("ZL7j"),o("KHd+")),r={},l=Object(s["a"])(r,n,i,!1,null,null,null),c=l.exports,d=o("GIGG"),u=o.n(d),m=o("n3sq"),p=o("NFlh"),g=o("jE9Z"),f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("v-dialog"),t._m(0),o("div",{staticClass:"loginwrapper jumbotron p-0 mx-auto col-12 col-sm-10 col-md-10 col-lg-8 col-xl-6 container-fluid my-3"},[o("div",{staticClass:"row"},[o("div",{staticClass:"left p-5 mx-auto col-12 col-sm-10 col-md-10 col-lg-8 col-xl-6"}),o("div",{staticClass:"right p-5 mx-auto bg-dark col-12 col-sm-10 col-md-10 col-lg-8 col-xl-6 mb-5 mb-sm-5 mb-md-5 mb-lg-5 mb-xl-0"},[o("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"id"}},[t._v("E-mail / Username")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.identification,expression:"loginData.identification"}],staticClass:"form-control",attrs:{type:"text",required:"",name:"Identification",id:"id"},domProps:{value:t.loginData.identification},on:{input:function(e){e.target.composing||t.$set(t.loginData,"identification",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"pw"}},[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.password,expression:"loginData.password"}],staticClass:"form-control",attrs:{type:"password",required:"",name:"Password",id:"pw"},domProps:{value:t.loginData.password},on:{input:function(e){e.target.composing||t.$set(t.loginData,"password",e.target.value)}}})]),o("div",{staticClass:"form-group checkbox"},[o("label",{attrs:{for:"remember"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.remember,expression:"remember"}],attrs:{type:"checkbox",id:"remember"},domProps:{checked:Array.isArray(t.remember)?t._i(t.remember,null)>-1:t.remember},on:{change:function(e){var o=t.remember,a=e.target,n=!!a.checked;if(Array.isArray(o)){var i=null,s=t._i(o,i);a.checked?s<0&&(t.remember=o.concat([i])):s>-1&&(t.remember=o.slice(0,s).concat(o.slice(s+1)))}else t.remember=n}}}),t._v(" Remember me?")])]),o("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Log in")])]),t._m(1)])])])],1)},h=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("h1",{staticClass:"my-3"},[o("i",[t._v("Elektronski dnevnik")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mt-2"},[o("a",{attrs:{title:"Realtime application protection",href:"https://www.sqreen.io/?utm_source=badge"}},[o("img",{staticStyle:{width:"109px",height:"36px"},attrs:{src:"https://s3-eu-west-1.amazonaws.com/sqreen-assets/badges/20171107/sqreen-dark-badge.svg",alt:"Sqreen | Runtime Application Protection"}})])])}],b=o("GPre"),v=o.n(b),y=(o("vQ/n"),{name:"Login",components:{Loading:v.a},data:function(){return{apipath:"https://elektronski-dnevnik.herokuapp.com",remember:!1,loginData:{identification:"",password:""},loading:!1}},created:function(){this.loading=!0},mounted:function(){var t=this;this.loading=!1,(window.sessionStorage.getItem("token")||window.localStorage.getItem("token"))&&(this.$modal.show("dialog",{title:"You're already logged in!",text:"You are going to be redirected...",buttons:[{title:"Go",default:!0,handler:function(){return t.$router.push("dashboard")}}]}),this.loading=!0,setTimeout(function(){t.$router.push("dashboard")},5e3))},methods:{onSubmit:function(){var t=this;this.loading=!0,console.log(this.loginData),fetch(this.apipath+"/auth/login",{headers:{"content-type":"application/json"},body:JSON.stringify(this.loginData),method:"POST",mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!1===e.auth?t.$modal.show("dialog",{title:"Error",text:e.message,button:[{title:"Close"}]}):e.token?fetch(t.apipath+"/user/me",{mode:"cors",headers:{"x-access-token":e.token,"content-type":"application/json"}}).then(function(t){return t.json()}).then(function(o){!1===o.good?t.$modal.show("dialog",{title:"Error occured!",text:"Something went wrong while trying to get your data!",buttons:[{title:"Close"}]}):(t.remember?(window.localStorage.setItem("token",e.token),window.localStorage.setItem("me",JSON.stringify(o.data[0]))):(window.sessionStorage.setItem("token",e.token),window.sessionStorage.setItem("me",JSON.stringify(o.data[0]))),t.$router.push("/dashboard"))}).catch(function(e){t.$modal.show("dialog",{title:"Error occured!",text:"Something went wrong while trying to get your data!",buttons:[{title:"Close"}]})}):t.$modal.show("dialog",{title:"Error occured!",text:"Something went wrong while the server was trying to authenticate you!",buttons:[{title:"Close"}]})}).catch(function(e){t.loading=!1,e&&t.$modal.show("dialog",{title:"Error occured!",text:e.message,buttons:[{title:"Close"}]})})}}}),w=y,k=(o("eBT5"),o("kEhd"),Object(s["a"])(w,f,h,!1,null,"237ebe88",null)),_=k.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page"},[o("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),o("v-dialog"),o("TokenCheck")],1)},C=[],S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("v-dialog")],1)},I=[],E={name:"TokenCheck",components:{Loading:v.a},data:function(){return{loading:!1}},mounted:function(){var t=this;window.localStorage.getItem("token")||window.sessionStorage.getItem("token")||(this.$modal.show("dialog",{title:"You're not logged in!",text:"You can't access this part of the site without being logged in. You're being redirected to the login page!",buttons:[{title:"Go",default:!0,handler:function(){return t.$router.push("/")}}]}),this.loading=!0,setTimeout(function(){t.$router.push("/")},5e3))}},P=E,j=(o("TNW7"),Object(s["a"])(P,S,I,!1,null,null,null)),O=j.exports,N={name:"Logout",components:{TokenCheck:O,Loading:v.a},data:function(){return{isLoading:!1}},created:function(){this.isLoading=!0},mounted:function(){var t=this;window.localStorage.getItem("token")?window.localStorage.clear():window.sessionStorage.getItem("token")&&window.sessionStorage.clear(),this.$modal.show("dialog",{title:"You have been logged out!",text:"Come back soon!",buttons:[{title:"Go",default:!0,handler:function(){t.isLoading=!1,t.$router.push("/")}}]}),setTimeout(function(){t.isLoading=!1,t.$router.push("/")},5e3)}},T=N,A=(o("cQM4"),Object(s["a"])(T,x,C,!1,null,null,null)),L=A.exports,B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapper"},[o("NavBar"),o("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),o("p-o-s-t-grade"),o("list-grades"),o("v-dialog"),o("div",{staticClass:"content container-fluid mx-auto align-middle text-center"},[o("div",{staticClass:"bg-dark p-3 h-25 row mx-auto"},[o("b-tabs",{staticClass:"mx-3",attrs:{pills:""}},[o("b-tab",{attrs:{title:"Grades"},on:{click:function(e){t.tab="Grades"}}}),o("b-tab",{attrs:{title:"Classes"},on:{click:function(e){t.tab="Classes"}}}),o("b-tab",{attrs:{title:"Subjects"},on:{click:function(e){t.tab="Subjects"}}})],1),o("b-form-select",{staticClass:"mx-3",attrs:{name:"year-select",id:"year-range"},model:{value:t.chosen,callback:function(e){t.chosen=e},expression:"chosen"}},[o("option",{attrs:{value:""}},[t._v("\n                    Current\n                ")]),t._l(t.yearArray,function(e){return o("option",{key:e._id,domProps:{value:e.yearRange}},[t._v("\n                    "+t._s(e.yearRange)+"\n                ")])})],2),"Grades"===t.tab?o("b-form-select",{staticClass:"mx-3",attrs:{name:"class-select",id:"class-select"},model:{value:t.chosen2,callback:function(e){t.chosen2=e},expression:"chosen2"}},t._l(t.classArray,function(e){return o("option",{key:e,domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                ")])})):t._e()],1),"Grades"===t.tab?o("div",{staticClass:"p-3"},[o("h2",[t._v("GRADES MENU")]),o("button",{staticClass:"btn btn-success w-100 h-100 p-3",on:{click:function(){t.showGrades()}}},[t._v("\n                Show grades\n            ")]),"Administrator"===t.me().accountType||"Profesor"===t.me().accountType?o("button",{staticClass:"btn btn-success w-100 h-100 p-3",on:{click:function(){t.showCreateGreade()}}},[t._v("\n                Give a grade!\n            ")]):t._e()]):t._e(),"Classes"===t.tab?o("div",{staticClass:"p-3"},[o("h2",[t._v("CLASSES MENU")])]):t._e(),"Subjects"===t.tab?o("div",{staticClass:"p-3"},[o("h2",[t._v("SUBJECTS MENU")])]):t._e()])],1)},U=[],G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapper"},[o("TokenCheck"),o("nav",{staticClass:"overlay",class:{active:t.isActive},attrs:{id:"sidebar"}},[o("div",{staticClass:"left float-left py-2 dropdown"},[o("h4",{staticClass:"m-auto border-1"},[t._v("Menu")]),t._l(t.buttons,function(e){return o("h4",{key:e.text,staticClass:"m-auto border-1"},[t._v(t._s(e.text))])})],2),o("div",{staticClass:"right float-left py-2 dropdown"},[o("button",{staticClass:"btn btn-dark navbar-btn p-0",attrs:{type:"button"},on:{click:t.onClick}},[o("icon",{staticClass:"my-1",attrs:{name:"menu"}})],1),t._l(t.buttons,function(t){return o("a",{key:t.text,staticClass:"btn navbar-btn p-0",attrs:{href:t.link}},[o("icon",{staticClass:"my-1",attrs:{name:t.iconname}})],1)})],2),t._m(0)])],1)},J=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bottom footer-copyright text-left m-0 px-2 py-3"},[o("a",{attrs:{title:"Realtime application protection",href:"https://www.sqreen.io/?utm_source=badge"}},[o("img",{staticStyle:{width:"109px",height:"36px"},attrs:{src:"https://s3-eu-west-1.amazonaws.com/sqreen-assets/badges/20171107/sqreen-dark-badge.svg",alt:"Sqreen | Runtime Application Protection"}})]),o("br"),o("small",[t._v("Elektronski dnevnik")]),o("br"),t._v("\n            Â© 2018 V.N.\n            "),o("a",{attrs:{href:"https://github.com/nexylmao/"}},[t._v(" github.com")])])}],M=(o("8d1z"),{name:"Navbar",components:{TokenCheck:O},data:function(){return{user:JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me")),isActive:!0,buttons:[{text:"Home",iconname:"home",link:"/#/dashboard"},{text:"Data",iconname:"database",link:"/#/dashboard2"},{text:"Profile",iconname:"user",link:"/#/user"},{text:"Logout",iconname:"log-out",link:"/#/logout"}]}},methods:{onClick:function(){this.isActive=!this.isActive}}}),D=M,F=(o("YAXI"),o("4x2p"),Object(s["a"])(D,G,J,!1,null,"a5cac2e4",null)),q=F.exports,z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"list-grades",scrollable:!0,height:"auto",width:"75%"},on:{"before-open":t.beforeOpen,opened:t.onOpened}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("div",{staticClass:"container-fluid jumbotron bg-dark m-0 p-0"},t._l(t.grades,function(e){return o("button",{key:e._id,staticClass:"btn btn-dark w-100 p-2 col-4"},[o("div",{staticClass:"p-2"},[o("h4",[t._v("Grade : "+t._s(e.grade))]),t._v("\n                subject : "+t._s(e.subject)+"\n                "),o("br"),o("small",[t._v("\n                    givenBy : "+t._s(e.givenBy)+"\n                ")]),o("br"),o("small",[t._v("\n                    givenTo : "+t._s(e.givenTo)+"\n                ")])])])}))],1)},R=[],Y={data:function(){return{syheader:"",classheader:"",loading:!1,grades:[],apipath:"https://elektronski-dnevnik.herokuapp.com"}},components:{Loading:v.a},methods:{beforeOpen:function(t){t.params&&(this.syheader=t.params.schoolyear,this.classheader=t.params.class)},onOpened:function(){var t=this;this.loading=!0,fetch(this.apipath+"/grade",{mode:"cors",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token"),"x-school-year":this.syheader,"x-class":this.classheader}}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?t.grades=e.data:(t.$modal.hide("list-grades"),t.$modal.show("dialog",{title:"Error!",text:e.message||"No users found!",buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.loading=!1,t.$modal.hide("list-grades"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})})}}},V=Y,H=(o("faDi"),Object(s["a"])(V,z,R,!1,null,"bcacb506",null)),Q=H.exports,Z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"create-grade",scrollable:!0,height:"auto"},on:{"before-open":t.beforeOpen,opened:t.onOpened}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("div",{staticClass:"jumbotron bg-dark h-100 mb-0"},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("h5",[t._v("Give as : \n                "),t.prepost.choices&&t.prepost.choices.profesorGives?o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.givenBy,expression:"body.givenBy"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"givenBy",e.target.multiple?o:o[0])}}},t._l(t.prepost.choices.profesorGives,function(e){return o("option",{key:e.profesor,domProps:{value:e.profesor},on:{click:function(o){t.body.profesorGives=e}}},[t._v(t._s(e.profesor))])})):o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.givenBy,expression:"body.givenBy"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"givenBy",e.target.multiple?o:o[0])}}},[o("option",{attrs:{selected:"selected"},domProps:{value:t.me().username}},[t._v(t._s(t.me().username))])])]),t.body.givenBy?o("h5",[t._v("\n                Subject :\n                "),t.prepost.choice?o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.subject,expression:"body.subject"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"subject",e.target.multiple?o:o[0])}}},t._l(t.prepost.choice.subject,function(e){return t.prepost.choice?o("option",{key:e},[t._v("\n                        "+t._s(e)+"\n                    ")]):t._e()})):o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.subject,expression:"body.subject"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"subject",e.target.multiple?o:o[0])}}},t._l(t.body.profesorGives.subjects,function(e){return t.prepost.choices&&t.body.profesorGives?o("option",{key:e,domProps:{value:e}},[t._v("\n                        "+t._s(e)+"\n                    ")]):t._e()}))]):t._e(),o("h5",[t._v("Give to : "),t.prepost.choices?o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.student,expression:"body.student"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"student",e.target.multiple?o:o[0])}}},t._l(t.prepost.choices.givenTo,function(e){return o("option",{key:e,domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                ")])})):t._e(),t.prepost.choice?o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.student,expression:"body.student"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"student",e.target.multiple?o:o[0])}}},t._l(t.prepost.choice.student,function(e){return o("option",{key:e,domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                ")])})):t._e()]),o("h5",[t._v("Grade : "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.grade,expression:"body.grade"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"grade",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"1"}},[t._v("1")]),o("option",{attrs:{value:"2"}},[t._v("2")]),o("option",{attrs:{value:"3"}},[t._v("3")]),o("option",{attrs:{value:"4"}},[t._v("4")]),o("option",{attrs:{value:"5"}},[t._v("5")])])]),o("h5",[t._v("Points : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.points,expression:"body.points"}],attrs:{type:"number",name:"points",id:"ptn"},domProps:{value:t.body.points},on:{input:function(e){e.target.composing||t.$set(t.body,"points",e.target.value)}}})]),o("h5",[t._v("Description :\n                "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body.description,expression:"body.description"}],domProps:{value:t.body.description},on:{input:function(e){e.target.composing||t.$set(t.body,"description",e.target.value)}}})]),o("br"),o("b-button",{staticClass:"mt-3 btn-dark",attrs:{type:"submit"}},[t._v("\n                Submit\n            ")]),o("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:function(e){t.$modal.hide("create-grade")}}},[t._v("\n                Exit\n            ")])],1)],1)],1)},W=[],K=(o("rGqo"),{components:{Loading:v.a},data:function(){return{loading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com",body:{},prepost:{},syheader:"",classheader:""}},methods:{subjects:function(){var t=this;this.prepost.choices.profesorGives.forEach(function(e){if(e.profesor===t.body.givenBy)return e.subjects})},me:function(){return JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))},onSubmit:function(){var t=this;this.loading=!0,console.log(JSON.stringify(this.body)),fetch(this.apipath+"/grade",{method:"POST",body:JSON.stringify(this.body),mode:"cors",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token"),"x-school-year":this.syheader,"x-class":this.classheader}}).then(function(t){return t.json()}).then(function(e){t.loading=!1,console.log(e),!0===e.good?(t.$modal.hide("create-grade"),t.$modal.show("dialog",{title:"Success!",text:e.message||"No users found!",buttons:[{title:"Close",default:!0}]})):(t.$modal.hide("create-grade"),t.$modal.show("dialog",{title:"Error!",text:e.message||"No users found!",buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.loading=!1,t.$modal.hide("create-grade"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})})},beforeOpen:function(t){t.params&&(this.syheader=t.params.schoolyear,this.classheader=t.params.class)},onOpened:function(){var t=this;this.loading=!0,fetch(this.apipath+"/grade/prepost",{mode:"cors",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token"),"x-school-year":this.syheader,"x-class":this.classheader}}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?t.prepost=e.data:(t.$modal.hide("create-grade"),t.$modal.show("dialog",{title:"Error!",text:e.message||"No users found!",buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.loading=!1,t.$modal.hide("create-grade"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})})}}}),X=K,tt=(o("nNTZ"),Object(s["a"])(X,Z,W,!1,null,null,null)),et=tt.exports,ot={name:"Dashboard",components:{Loading:v.a,NavBar:q,ListGrades:Q,POSTGrade:et},data:function(){return{tab:"",chosen:"",chosen2:"",yearArray:[],classArray:[],isLoading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com"}},methods:{me:function(){return JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))},showCreateGreade:function(){this.$modal.show("create-grade",{schoolyear:this.chosen,class:this.chosen2})},showGrades:function(){this.$modal.show("list-grades",{schoolyear:this.chosen,class:this.chosen2})},setAllClass:function(){var t=this;window.localStorage.getItem("class")||window.sessionStorage.getItem("class")||(this.isLoading=!0,fetch(this.apipath+"/class/my/classes",{mode:"cors",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")}}).then(function(t){return t.json()}).then(function(e){t.isLoading=!1,!0===e.good?(window.localStorage.getItem("token")&&(window.localStorage.setItem("class",JSON.stringify(e.data)),t.classArray=e.data),window.sessionStorage.getItem("token")&&(window.sessionStorage.setItem("class",JSON.stringify(e.data)),t.classArray=e.data)):t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}).catch(function(e){t.isLoading=!1,t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}))},setAllSY:function(){var t=this;window.localStorage.getItem("years")||window.sessionStorage.getItem("years")||(this.isLoading=!0,fetch(this.apipath+"/schoolYear/small",{mode:"cors",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")}}).then(function(t){return t.json()}).then(function(e){t.isLoading=!1,!0===e.good?(window.localStorage.getItem("token")&&(window.localStorage.setItem("years",JSON.stringify(e.data)),t.yearArray=e.data),window.sessionStorage.getItem("token")&&(window.sessionStorage.setItem("years",JSON.stringify(e.data)),t.yearArray=e.data)):t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}).catch(function(e){t.isLoading=!1,t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}))},years:function(){return JSON.parse(window.localStorage.getItem("years")||window.sessionStorage.getItem("years"))},classes:function(){return JSON.parse(window.localStorage.getItem("class")||window.sessionStorage.getItem("class"))}},mounted:function(){this.setAllSY(),this.setAllClass(),this.yearArray=this.years(),this.classArray=this.classes()}},at=ot,nt=(o("x+xc"),Object(s["a"])(at,B,U,!1,null,"673b3614",null)),it=nt.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapper"},[o("profile-show",{attrs:{profile:t.passUser,backOnClose:!1}}),o("profiles-list"),o("create-profile"),o("facility-show"),o("NavBar"),o("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),o("div",{staticClass:"content py-5 px-1 px-md-2 px-lg-3 px-xl-3 container-fluid"},[o("v-dialog"),o("div",{staticClass:"row pl-5"},[o("div",{staticClass:"column col-12 col-sm-8 col-md-4 col-lg-3 col-xl-3"},[t._m(0),o("div",{staticClass:"my-3"},[o("button",{staticClass:"btn btn-success w-100 h-100 p-3",on:{click:function(){t.setToMe(),t.showUser()}}},[o("h4",[t._v("Show me")])])]),o("div",{staticClass:"my-3 bg-success"},[o("form",{on:{submit:function(e){return e.preventDefault(),function(){t.setToTextBox(),t.showUser()}()}}},[o("button",{staticClass:"btn btn-success w-100 h-100 p-3"},[o("h4",[t._v("Show "+t._s("user")+" !")])]),o("input",{staticClass:"m-3",attrs:{required:"",type:"text",name:"username",id:"usrnm",placeholder:"type username here","v-bind":t.passUser}})])]),o("div",{staticClass:"my-3"},[o("button",{staticClass:"btn btn-success w-100 h-100 p-3",on:{click:function(){t.showUsers()}}},[o("h4",[t._v("Show all users!")])])]),o("div",{staticClass:"my-3 bg-success"},[o("form",{on:{submit:function(e){return e.preventDefault(),function(){t.showTypeUser()}()}}},[o("button",{staticClass:"btn btn-success w-100 h-100 p-3"},[o("h4",[t._v("Show "+t._s("users")+" !")])]),o("select",{staticClass:"m-3",attrs:{required:"",id:"acctype"}},[o("option",{attrs:{value:"Student"}},[t._v("Student")]),o("option",{attrs:{value:"Parent"}},[t._v("Parent")]),o("option",{attrs:{value:"Profesor"}},[t._v("Profesor")]),o("option",{attrs:{value:"Moderator"}},[t._v("Moderator")]),"Student"!==t.user.accountType&&"Parent"!==t.user.accountType?o("option",{attrs:{value:"Administrator"}},[t._v("Administrator")]):t._e()])])]),o("div",{staticClass:"my-3"},[o("button",{staticClass:"btn btn-success w-100 h-100 p-3",on:{click:function(){t.createUser()}}},[o("h4",[t._v("Create user!")])])])]),o("div",{staticClass:"column col-12 col-sm-8 col-md-4 col-lg-3 col-xl-3"},[t._m(1),o("div",{staticClass:"my-3"},[o("form",{staticClass:"bg-success",on:{submit:function(e){return e.preventDefault(),function(){t.showFacility()}()}}},[t._m(2),o("input",{staticClass:"m-3",attrs:{required:"",type:"text",name:"shortname",id:"shrtnm",placeholder:"type facility shortname here","v-bind":t.passFacility}})])])]),t._m(3)])],1)],1)},rt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mb-5 text-white"},[o("h3",[t._v("Users")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mb-5 text-white"},[o("h3",[t._v("Facilities")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{staticClass:"btn btn-success w-100 h-100 p-3"},[o("h4",[t._v("Show facility")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"column col-12 col-sm-8 col-md-4 col-lg-3 col-xl-3"},[o("div",{staticClass:"mb-5 text-white"},[o("h3",[t._v("School Years")])])])}],lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"profile-show",height:"75%",adaptive:!0},on:{"before-open":t.beforeOpen,opened:t.onOpened,closed:t.onClose}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("edit-me"),o("edit-user",{attrs:{profile:t.profile}}),o("v-dialog"),o("facility-edit",{attrs:{profile:t.profile,user:t.CurrentUser}}),o("b-nav",{staticClass:"bg-dark"},[o("b-btn",{staticClass:"btn-dark",on:{click:function(e){t.$modal.hide("profile-show")}}},[o("icon",{attrs:{name:"x"}})],1),o("b-navbar-brand",{staticClass:"mx-auto"},[t._v(t._s(t.profile.username))]),"Administrator"===t.profile.accountType||"Administrator"!==t.CurrentUser.accountType&&("Moderator"!==t.CurrentUser.accountType||""!==t.profile.facility&&t.profile.facility!==t.CurrentUser.facility||"Administrator"===t.profile.accountType||"Administrator"===t.profile.accountType)?t._e():o("b-btn",{staticClass:"btn-dark",attrs:{title:"Change users facility"},on:{click:function(e){t.$modal.show("edit-user-facility")}}},[o("icon",{attrs:{name:"home"}})],1),t.CurrentUser.username===t.profile.username?o("b-btn",{staticClass:"btn-dark",attrs:{title:"Edit your data"},on:{click:function(e){t.$modal.show("edit-me")}}},[o("icon",{attrs:{name:"edit-2"}})],1):t._e(),"Administrator"===t.CurrentUser.accountType||"Moderator"===t.CurrentUser.accountType&&t.CurrentUser.facility===t.profile.facility&&"Administrator"!==t.profile.accountType&&"Administrator"!==t.profile.accountType?o("b-btn",{staticClass:"btn-dark",attrs:{title:"Edit users data"},on:{click:function(e){t.$modal.show("edit-user")}}},[o("icon",{attrs:{name:"edit"}})],1):t._e()],1),o("div",{staticClass:"w-100 h-100 py-3 text-center align-middle jumbotron",attrs:{id:"background"}},[o("div",{staticClass:"mx-auto my-3",attrs:{id:"picture"}}),o("div",{staticClass:"title"},[o("h2",[t._v(t._s(t.profile.fullname)+" | "),o("i",{staticClass:"text-danger"},[t._v(t._s(t.profile.accountType))]),"Administrator"!==t.profile.accountType?o("h2",[t._v(t._s(t.profile.facility))]):t._e()])]),o("div",{staticClass:"container"},[o("div",{staticClass:"col-6"},[o("small",[t._v("\n                    email : "+t._s(t.profile.email)+"\n                ")]),o("br"),t.profile.class&&""!==t.profile.class?o("small",[t._v("\n                    class : "+t._s(t.profile.class)+"\n                ")]):o("small",[t._v(" this person doesn't have a homeclass")])]),o("div",{staticClass:"col-6"},["Parent"===t.profile.accountType?o("div",[o("small",[t._v("chilren : ")]),o("br"),o("small",{attrs:{"v-for":t.child in t.profile.children}},[t._v("\n                        "+t._s(t.child)+"\n                    ")])]):t._e()])])])],1)},ct=[],dt=o("a94B"),ut=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"edit-user-facility",height:"200px"}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("div",{staticClass:"jumbotron py-3 bg-dark"},[o("b-form-group",[o("b-form-radio-group",{attrs:{stacked:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[o("b-form-radio",{attrs:{value:{choice:"nofacility",facility:""}}},[t._v("\n                        Set user to have no facility\n                    ")]),o("b-form-radio",{attrs:{value:{choice:"yesfacility",facility:t.text}}},[t._v("\n                        Set user to have a facility\n                    ")]),"yesfacility"===t.selected.choice?o("input",t._b({attrs:{type:"text",name:"facilityname",id:"fcname",disabled:""}},"input",t.text,!1)):t._e()],1)],1),o("b-button",{staticClass:"btn-dark",attrs:{type:"submit"}},[t._v("\n                Submit\n            ")]),o("b-button",{attrs:{variant:"danger"},on:{click:function(e){t.$modal.hide("edit-user-facility")}}},[t._v("\n                Exit\n            ")])],1)])],1)},mt=[],pt={name:"facility-edit",props:["profile","user"],components:{Loading:v.a},data:function(){return{apipath:"https://elektronski-dnevnik.herokuapp.com",selected:{},text:"",loading:!1}},created:function(){this.loading=!0},mounted:function(){this.loading=!1},watch:{selected:function(){var t=this;"nofacility"!==this.selected.choice&&$("fcname").ready(function(){document.getElementById("fcname").placeholder=t.user.facility||"type facility here!","Administrator"===t.user.accountType?document.getElementById("fcname").disabled=!1:document.getElementById("fcname").defaultValue=t.user.facility})}},methods:{onSubmit:function(){var t=this;this.selected==={}?this.$modal.hide("edit-user-facility"):(this.loading=!0,document.getElementById("fcname")?this.selected.facility=document.getElementById("fcname").value:this.selected.facility="",fetch(this.apipath+"/user/"+this.profile.username+"/facility",{method:"PUT",body:JSON.stringify({facility:this.selected.facility}),mode:"cors",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")}}).then(function(t){return t.json()}).then(function(e){!0===e.good?(t.loading=!1,t.$modal.hide("edit-user-facility")):(t.loading=!1,t.$modal.hide("edit-user-facility"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.$modal.hide("edit-user-facility"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}))}}},gt=pt,ft=(o("NQ42"),Object(s["a"])(gt,ut,mt,!1,null,null,null)),ht=ft.exports,bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"edit-me"},on:{opened:t.onOpened}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("div",{staticClass:"jumbotron py-3 bg-dark"},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("h4",{staticClass:"my-2"},[t._v("Change data ")]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Full name : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.fullname,expression:"body.fullname"}],attrs:{type:"text",id:"fullname",placeholder:t.body.fullname},domProps:{value:t.body.fullname},on:{input:function(e){e.target.composing||t.$set(t.body,"fullname",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Profile picture : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.picture,expression:"body.picture"}],attrs:{type:"text",id:"picture",placeholder:t.body.picture},domProps:{value:t.body.picture},on:{input:function(e){e.target.composing||t.$set(t.body,"picture",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Background picture : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.backgroundPicture,expression:"body.backgroundPicture"}],attrs:{type:"text",id:"backgroundPicture",placeholder:t.body.backgroundPicture},domProps:{value:t.body.backgroundPicture},on:{input:function(e){e.target.composing||t.$set(t.body,"backgroundPicture",e.target.value)}}})])]),o("b-button",{staticClass:"btn-dark",attrs:{type:"submit"}},[t._v("\n                Submit\n            ")]),o("b-button",{attrs:{variant:"danger"},on:{click:function(e){t.$modal.hide("edit-me")}}},[t._v("\n                Exit\n            ")])],1)],1)],1)},vt=[],yt={components:{Loading:v.a},data:function(){return{loading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com",body:{fullname:this.me().fullname,picture:this.me().picture,backgroundPicture:this.me().backgroundPicture}}},methods:{onOpened:function(){this.body={fullname:this.me().fullname,picture:this.me().picture,backgroundPicture:this.me().backgroundPicture}},setMe:function(t){window.localStorage.getItem("me")&&window.localStorage.setItem("me",t),window.sessionStorage.getItem("me")&&window.sessionStorage.setItem("me",t)},me:function(){return JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))},onSubmit:function(){var t=this;this.loading=!0,fetch(this.apipath+"/user/me",{body:JSON.stringify(this.body),mode:"cors",method:"PUT",headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")}}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?(t.$modal.hide("edit-me"),t.$modal.show("dialog",{title:"Success!",buttons:[{title:"Go back!",default:!0}]}),setMe(e.data)):(t.$modal.hide("edit-me"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Go back!",default:!0}]}))}).catch(function(e){e&&(t.loading=!1,t.$modal.hide("edit-me"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Go back!",default:!0}]}))})}}},wt=yt,kt=(o("5SmC"),Object(s["a"])(wt,bt,vt,!1,null,null,null)),_t=kt.exports,xt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"edit-user",height:"80%"},on:{opened:t.onOpened}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("div",{staticClass:"jumbotron py-3 bg-dark"},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("h4",{staticClass:"my-2"},[t._v("Change data ")]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Full name : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.fullname,expression:"body.fullname"}],attrs:{type:"text",id:"fullname",placeholder:t.body.fullname},domProps:{value:t.body.fullname},on:{input:function(e){e.target.composing||t.$set(t.body,"fullname",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Account type : "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.accountType,expression:"body.accountType"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"accountType",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"Student"}},[t._v("Student")]),o("option",{attrs:{value:"Parent"}},[t._v("Parent")]),o("option",{attrs:{value:"Profesor"}},[t._v("Profesor")]),o("option",{attrs:{value:"Moderator"}},[t._v("Moderator")]),o("option",{attrs:{value:"Administrator"}},[t._v("Administrator")])])])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Facility : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.facility,expression:"body.facility"}],attrs:{type:"text",id:"facility",placeholder:t.body.facility},domProps:{value:t.body.facility},on:{input:function(e){e.target.composing||t.$set(t.body,"facility",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("email : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.email,expression:"body.email"}],attrs:{type:"text",id:"email",placeholder:t.body.email},domProps:{value:t.body.email},on:{input:function(e){e.target.composing||t.$set(t.body,"email",e.target.value)}}})])]),"Student"===t.profile.accountType?o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Homeclass : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.class,expression:"body.class"}],attrs:{type:"text",id:"class",placeholder:t.body.class},domProps:{value:t.body.class},on:{input:function(e){e.target.composing||t.$set(t.body,"class",e.target.value)}}})])]):t._e(),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Profile picture : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.picture,expression:"body.picture"}],attrs:{type:"text",id:"picture",placeholder:t.body.picture},domProps:{value:t.body.picture},on:{input:function(e){e.target.composing||t.$set(t.body,"picture",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Background picture : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.backgroundPicture,expression:"body.backgroundPicture"}],attrs:{type:"text",id:"backgroundPicture",placeholder:t.body.backgroundPicture},domProps:{value:t.body.backgroundPicture},on:{input:function(e){e.target.composing||t.$set(t.body,"backgroundPicture",e.target.value)}}})])]),o("b-button",{staticClass:"btn-dark",attrs:{type:"submit"}},[t._v("\n                Submit\n            ")]),o("b-button",{attrs:{variant:"danger"},on:{click:function(e){t.$modal.hide("edit-user")}}},[t._v("\n                Exit\n            ")])],1)],1)],1)},Ct=[],St={components:{Loading:v.a},props:["profile"],data:function(){return{loading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com",body:this.profile}},methods:{onOpened:function(){this.body=this.profile},setMe:function(t){window.localStorage.getItem("me")&&window.localStorage.setItem("me",t),window.sessionStorage.getItem("me")&&window.sessionStorage.setItem("me",t)},me:function(){return JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))},onSubmit:function(){var t=this;this.loading=!0,fetch(this.apipath+"/user/"+this.profile.username,{mode:"cors",method:"PUT",body:JSON.stringify(this.body),headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")}}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?(t.$modal.hide("edit-user"),t.$modal.show("dialog",{title:"Success!",buttons:[{title:"Go back!",default:!0}]}),e.data.username===t.me().username&&setMe(e.data)):(t.$modal.hide("edit-user"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Go back!",default:!0}]}))}).catch(function(e){e&&(t.loading=!1,t.$modal.hide("edit-user"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Go back!",default:!0}]}))})}}},$t=St,It=(o("ddh8"),Object(s["a"])($t,xt,Ct,!1,null,null,null)),Et=It.exports,Pt={name:"ProfileShow",props:["profile","backOnClose"],components:{EditMe:_t,EditUser:Et,FacilityEdit:ht,Loading:v.a},data:function(){return{loading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com",CurrentUser:JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))}},methods:{beforeOpen:function(t){t.params&&(this.profile=t.params.profile)},onOpened:function(){var t=this;this.loading=!0,Object(dt["a"])(this.profile)!==Object(dt["a"])({})&&fetch(this.apipath+"/user/"+this.profile,{headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")},mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?(t.profile=e.data,document.getElementById("background").style.background='url("'+t.profile.backgroundPicture+'")',document.getElementById("background").style.backgroundSize="cover",document.getElementById("background").style.backgroundPosition="center",document.getElementById("picture").style.background='url("'+t.profile.picture+'")',document.getElementById("picture").style.backgroundSize="cover",document.getElementById("picture").style.backgroundPosition="center"):(t.loading=!1,t.$modal.hide("profile-show"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.loading=!1,t.$modal.hide("profile-show"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}),document.getElementById("background").style.background='url("'+this.profile.backgroundPicture+'")',document.getElementById("background").style.backgroundSize="cover",document.getElementById("background").style.backgroundPosition="center",document.getElementById("picture").style.background='url("'+this.profile.picture+'")',document.getElementById("picture").style.backgroundSize="cover",document.getElementById("picture").style.backgroundPosition="center",this.loading=!1},onClose:function(){this.backOnClose&&window.history.back()}}},jt=Pt,Ot=(o("2UeZ"),Object(s["a"])(jt,lt,ct,!1,null,"514b7d95",null)),Nt=Ot.exports,Tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"list-profiles",scrollable:!0,height:"auto"},on:{"before-open":t.beforeOpened,opened:t.onOpened,closed:t.onClosed}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("div",{staticClass:"jumbotron bg-dark m-0 p-0"},t._l(t.profiles,function(e){return o("button",{key:e.username,staticClass:"btn btn-dark w-100 p-2 col-4",on:{click:function(){t.setUser(e),t.showUser()}}},[t._v("\n            "+t._s(e.username)),o("br")])}))],1)},At=[],Lt={name:"ProfilesList",components:{ProfileShow:Nt,Loading:v.a},data:function(){return{type:"",all:!1,profiles:[],chosen:{},loading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com"}},methods:{beforeOpened:function(t){this.type="",this.all=!1,t.params.type&&(this.type=t.params.type),t.params.all&&(this.all=t.params.all)},setUser:function(t){this.chosen=JSON.parse(JSON.stringify(t))},showUser:function(){this.$modal.hide("list-profiles"),this.$modal.show("profile-show",{profile:this.chosen})},onOpened:function(){var t=this;this.loading=!0;var e="/user";""!==this.type&&!1===this.all&&(e+="/type/"+this.type),fetch(this.apipath+e,{headers:{"x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token"),"content-type":"application/json"},mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good&&0!==e.data.length?t.profiles=e.data:(t.$modal.hide("list-profiles"),t.$modal.show("dialog",{title:"Error!",text:e.message||"No users found!",buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.$modal.hide("list-profiles"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})})},onClosed:function(){}}},Bt=Lt,Ut=(o("W4gr"),Object(s["a"])(Bt,Tt,At,!1,null,"8005b820",null)),Gt=Ut.exports,Jt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"create-user",height:"80%"}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("div",{staticClass:"jumbotron py-3 bg-dark"},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("h4",{staticClass:"my-2"},[t._v("Change data ")]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Username : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.username,expression:"body.username"}],attrs:{required:"",type:"text",id:"username"},domProps:{value:t.body.username},on:{input:function(e){e.target.composing||t.$set(t.body,"username",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Password : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.password,expression:"body.password"}],attrs:{required:"",type:"text",id:"password"},domProps:{value:t.body.password},on:{input:function(e){e.target.composing||t.$set(t.body,"password",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Full name : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.fullname,expression:"body.fullname"}],attrs:{type:"text",id:"fullname"},domProps:{value:t.body.fullname},on:{input:function(e){e.target.composing||t.$set(t.body,"fullname",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Account type : "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.body.accountType,expression:"body.accountType"}],attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.body,"accountType",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"Student"}},[t._v("Student")]),o("option",{attrs:{value:"Parent"}},[t._v("Parent")]),o("option",{attrs:{value:"Profesor"}},[t._v("Profesor")]),"Administrator"===t.me().accountType?o("option",{attrs:{value:"Moderator"}},[t._v("Moderator")]):t._e(),"Administrator"===t.me().accountType?o("option",{attrs:{value:"Administrator"}},[t._v("Administrator")]):t._e()])])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Facility : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.facility,expression:"body.facility"}],attrs:{type:"text",id:"facility"},domProps:{value:t.body.facility},on:{input:function(e){e.target.composing||t.$set(t.body,"facility",e.target.value)}}})])]),o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("email : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.email,expression:"body.email"}],attrs:{required:"",type:"text",id:"email"},domProps:{value:t.body.email},on:{input:function(e){e.target.composing||t.$set(t.body,"email",e.target.value)}}})])]),"Student"===t.body.accountType?o("b-form-group",{staticClass:"m-1"},[o("p",[t._v("Homeclass : "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.body.class,expression:"body.class"}],attrs:{required:"",type:"text",id:"class"},domProps:{value:t.body.class},on:{input:function(e){e.target.composing||t.$set(t.body,"class",e.target.value)}}})])]):t._e(),o("b-button",{staticClass:"btn-dark",attrs:{type:"submit"}},[t._v("\n                Submit\n            ")]),o("b-button",{attrs:{variant:"danger"},on:{click:function(e){t.$modal.hide("create-user")}}},[t._v("\n                Exit\n            ")])],1)],1)],1)},Mt=[],Dt={components:{Loading:v.a},data:function(){return{loading:!1,apipath:"https://elektronski-dnevnik.herokuapp.com",body:{}}},methods:{me:function(){return JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))},onSubmit:function(){var t=this;this.loading=!0,fetch(this.apipath+"/user/",{mode:"cors",method:"POST",body:JSON.stringify(this.body),headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")}}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?(t.$modal.hide("create-user"),t.$modal.show("dialog",{title:"Success!",buttons:[{title:"Go back!",default:!0}]})):(t.$modal.hide("create-user"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Go back!",default:!0}]}))}).catch(function(e){e&&(t.loading=!1,t.$modal.hide("create-user"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Go back!",default:!0}]}))})}}},Ft=Dt,qt=(o("zHnp"),Object(s["a"])(Ft,Jt,Mt,!1,null,null,null)),zt=qt.exports,Rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("modal",{attrs:{name:"facility-view",height:"75%"},on:{"before-open":t.beforeOpened,opened:t.onOpened}},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("v-dialog"),o("div",{staticClass:"jumbotron p-0"},[o("b-nav",{staticClass:"bg-dark"},[o("b-btn",{staticClass:"btn-dark",on:{click:function(e){t.$modal.hide("facility-view")}}},[o("icon",{attrs:{name:"x"}})],1)],1),o("div",{staticClass:"w-100 h-100 py-3 text-center align-middle jumbotron",attrs:{id:"background"}},[o("div",{staticClass:"mx-auto my-3",attrs:{id:"picture"}})])],1)],1)},Yt=[],Vt={components:{Loading:v.a},data:function(){return{apipath:"https://elektronski-dnevnik.herokuapp.com",Facility:{},loading:!1,obj:""}},methods:{beforeOpened:function(t){t.params.facility&&(this.obj=t.params.facility)},onOpened:function(){var t=this;this.loading=!0,Object(dt["a"])(this.obj)!==Object(dt["a"])({})&&fetch(this.apipath+"/facility/"+this.obj,{headers:{"content-type":"application/json","x-access-token":window.localStorage.getItem("token")||window.sessionStorage.getItem("token")},mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.loading=!1,!0===e.good?(t.Facility=e.data,document.getElementById("background").style.background='url("'+t.Facility.backgroundPicture+'")',document.getElementById("background").style.backgroundSize="cover",document.getElementById("background").style.backgroundPosition="center",document.getElementById("picture").style.background='url("'+t.Facility.picture+'")',document.getElementById("picture").style.backgroundSize="cover",document.getElementById("picture").style.backgroundPosition="center"):(t.$modal.hide("profile-show"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]}))}).catch(function(e){t.loading=!1,t.$modal.hide("profile-show"),t.$modal.show("dialog",{title:"Error!",text:e.message,buttons:[{title:"Close",default:!0}]})}),document.getElementById("background").style.background='url("'+this.Facility.backgroundPicture+'")',document.getElementById("background").style.backgroundSize="cover",document.getElementById("background").style.backgroundPosition="center",document.getElementById("picture").style.background='url("'+this.Facility.picture+'")',document.getElementById("picture").style.backgroundSize="cover",document.getElementById("picture").style.backgroundPosition="center",this.loading=!1}}},Ht=Vt,Qt=(o("sABN"),Object(s["a"])(Ht,Rt,Yt,!1,null,"2160952d",null)),Zt=Qt.exports,Wt={name:"RegularData",components:{CreateProfile:zt,ProfileShow:Nt,ProfilesList:Gt,Loading:v.a,NavBar:q,FacilityShow:Zt},data:function(){return{user:JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me")),passFacility:"",passUser:{},isLoading:!1}},methods:{showFacility:function(){this.$modal.show("facility-view",{facility:$("#shrtnm").val()})},createUser:function(){this.$modal.show("create-user")},showUsers:function(){this.$modal.show("list-profiles",{all:!0})},setToTextBox:function(){this.passUser=$("#usrnm").val()},setToMe:function(){this.passUser=JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))},showUser:function(){this.$modal.show("profile-show")},showTypeUser:function(){this.$modal.show("list-profiles",{all:!1,type:document.getElementById("acctype").value})}},created:function(){this.Loading=!0},mounted:function(){this.Loading=!1}},Kt=Wt,Xt=(o("e2pU"),Object(s["a"])(Kt,st,rt,!1,null,"ff8609cc",null)),te=Xt.exports,ee=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapping"},[o("Loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),o("profile-show",{attrs:{profile:t.me,backOnClose:!0}})],1)},oe=[],ae={name:"me-profile",components:{ProfileShow:Nt,Loading:v.a},data:function(){return{loading:!1,me:JSON.parse(window.localStorage.getItem("me")||window.sessionStorage.getItem("me"))}},created:function(){this.loading=!0},mounted:function(){this.loading=!1,this.$modal.show("profile-show")}},ne=ae,ie=(o("wcrJ"),Object(s["a"])(ne,ee,oe,!1,null,null,null)),se=ie.exports;a["default"].use(g["a"]);var re=new g["a"]({routes:[{path:"/",name:"loginPage",component:_},{path:"/logout",names:"logout",component:L},{path:"/dashboard",name:"dashboard",component:it},{path:"/dashboard2",name:"dashboard-data",component:te},{path:"/user",name:"user-me",component:se}]});o("+eM2"),o("LdiE");window.$=o("EVdn"),window.jQuery=o("EVdn"),a["default"].config.productionTip=!1,a["default"].use(p["a"]),a["default"].use(u.a,{dialog:!0,dynamic:!0}),a["default"].use(m["a"]),new a["default"]({router:re,render:function(t){return t(c)}}).$mount("#app")},Vv80:function(t,e,o){},W4gr:function(t,e,o){"use strict";var a=o("u4PT"),n=o.n(a);n.a},YAXI:function(t,e,o){"use strict";var a=o("wiw8"),n=o.n(a);n.a},ZL7j:function(t,e,o){"use strict";var a=o("bP1M"),n=o.n(a);n.a},bP1M:function(t,e,o){},budv:function(t,e,o){},cQM4:function(t,e,o){"use strict";var a=o("FP6H"),n=o.n(a);n.a},cRMe:function(t,e,o){},ddh8:function(t,e,o){"use strict";var a=o("HvQT"),n=o.n(a);n.a},e2pU:function(t,e,o){"use strict";var a=o("plOw"),n=o.n(a);n.a},eBT5:function(t,e,o){"use strict";var a=o("yk2f"),n=o.n(a);n.a},esD5:function(t,e,o){},faDi:function(t,e,o){"use strict";var a=o("CCNQ"),n=o.n(a);n.a},gfd7:function(t,e,o){},kEhd:function(t,e,o){"use strict";var a=o("6U7A"),n=o.n(a);n.a},kVqF:function(t,e,o){},nNTZ:function(t,e,o){"use strict";var a=o("cRMe"),n=o.n(a);n.a},plOw:function(t,e,o){},sABN:function(t,e,o){"use strict";var a=o("budv"),n=o.n(a);n.a},u4PT:function(t,e,o){},wcrJ:function(t,e,o){"use strict";var a=o("esD5"),n=o.n(a);n.a},wiw8:function(t,e,o){},"x+xc":function(t,e,o){"use strict";var a=o("FMEd"),n=o.n(a);n.a},"x9/q":function(t,e,o){},yk2f:function(t,e,o){},zHnp:function(t,e,o){"use strict";var a=o("gfd7"),n=o.n(a);n.a}});
//# sourceMappingURL=app.c35fa5c6.js.map